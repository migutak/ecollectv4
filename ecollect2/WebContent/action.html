
<link href="bootstrap/css/bootstrap-datetimepicker.css" rel="stylesheet"
	media="screen">

<form class="form-horizontal" ng-submit="addAction()" name="actionform">
	<br>
	<div class="row">
		<div class="col-md-3">Collector Activity</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select class="form-control" id="action" ng-model="dataIn.action"
					required>
					<option value="OC">Outgoing Call</option>
					<option value="IC">Incoming Call</option>
					<option value="FT">Funds Transfer</option>
					<option value="MET">Debtor Visited</option>
					<option value="REVW">Account Review</option>
					<option value="SC">Sent Correspondence</option>
					<option value="LR">Received Correspondence</option>
					<option value="RR">Route for review</option>
					<option value="OA">Assign Outside Agency</option>
					<option value="RF">Receive File</option>
					<option value="NFA">New File Allocation</option>
					<option value="Invalid" selected>-- Select an Option --</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">Demand Letter</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<div class="input-group col-sm-12" data-link-field="dataIn.demand">
					<select class="form-control" id="demand" ng-model="dataIn.demand">
						<option ng-repeat="letter in letters">{{letter.DEMAND}}</option>
					</select>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3">Party Contacted</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select class="form-control" id="party" ng-model="dataIn.party"
					ng-disabled="partyinactive">
					<option value="1">Account Holder</option>
					<option value="2">No Answer</option>
					<option value="3">Number not In Service</option>
					<option value="4">Secondary AccountHolder</option>
					<option value="5">Third Party</option>
					<option value="6">Disconnected</option>
					<option value="NA">Not Applicable</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">Reason for Default</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select class="form-control" id="reason" ng-model="dataIn.reason">
					<option value="Hardship">Hardship</option>
					<option value="Bankruptcy">Bankruptcy</option>
					<option value="Death_In_family">Death in Family</option>
					<option value="Deceased">Deceased</option>
					<option value="Dispute">Dispute</option>
					<option value="Divorce">Divorce</option>
					<option value="Delay_in_proceeds">Delay in proceeds</option>
					<option value="Diversion_of_proceeds">Diversion of proceeds</option>
					<option value="Crop_failure">Crop failure</option>
					<option value="AWOL">AWOL/Left employment</option>
					<option value="Discharged">Discharged</option>
					<option value="Dismissed">Dismissed</option>
					<option value="Interdicted">Interdicted</option>
					<option value="Left_Employment">Left Employment</option>
					<option value="Resigned">Resigned</option>
					<option value="Retired">Retired</option>
					<option value="Retrenched">Retrenched</option>
					<option value="Sacked">Sacked</option>
					<option value="Self_Employed">Self Employed</option>
					<option value="Summary_Dismissal">Summary Dismissal</option>
					<option value="Suspended">Suspended</option>
					<option value="Terminated">Terminated</option>
					<option value="Business_Failure">Business Failure</option>
					<option value="Business_Loss">Business Loss</option>
				</select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3">Promise to pay</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select class="form-control" id="ptp" ng-model="dataIn.ptp"
					ng-disabled="ptpinactive">
					<option value="Yes">Yes</option>
					<option value="No" selected>No</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">Route for Review</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select id="route" class="form-control" ng-model="dataIn.route"
					required>
					<option ng-repeat="r in Reviewer">{{r.FNAME}}</option>
				</select>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3">Promise Amount</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<div class="input-group col-sm-12">
					<input type="number" class="form-control" id="ptpamount"
						ng-model="dataIn.ptpamount" ng-disabled="inactive" min="0" max="10000000" step="1" value="0"> <span
						class="input-group-addon"><a href="" data-toggle="modal"
						data-target="#multiptp">...</a></span>
				</div>
			</div>
		</div>
		<div class="col-md-3">CMD Status</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select id="cmdstatus" class="form-control"
					ng-model="dataIn.cmdstatus">
					<option ng-repeat="cmd in cmdstatus_src">{{cmd.VALUE}}</option>
				</select> <input id="txtcmdstatus" type="hidden" class="form-control" />
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3">Promise Date</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<div class="input-group date form_date col-sm-12" data-date=""
					data-date-format="dd MM yyyy" data-link-field="ptpdate" data-link-format="dd-mm-yyyy">
					<input class="form-control" type="text"
						value="{{date | date:'yyyy-MM-dd'}}" ng-model="dataIn.ptpdate"
						ng-disabled="inactive"> <span class="input-group-addon" style="display:block" id="divptpdate"><span
						class="glyphicon glyphicon-calendar"></span></span>
				</div>
			</div>
			<input type="text" id="ptpdate" ng-model="dataIn.ptpdate" /><br />
		</div>
		<div class="col-md-3">Branch Status</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select id="brstatus" class="form-control"
					ng-model="dataIn.brstatus">
					<option ng-repeat="br in brstatus_src">{{br.VALUE}}</option>
				</select> <input id="brstatus" type="hidden" class="form-control" />
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3">Payment Mode</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<select id="payMode" class="form-control" class="input-medium"
					ng-model="dataIn.paymode" ng-disabled="inactive">
					<option value="Cash">Cash</option>
					<option value="Cheque">Cheque</option>
					<option value="Transfer">Transfer</option>
					<option value="NA" selected>Not Applicable</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">Account Curing Method</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<div class="input-group col-sm-12" data-link-field="dataIn.curing">
					<select class="form-control" id="curring" ng-model="dataIn.curing">
						<option value="NOT">Not Updated</option>
						<option value="REST">Restructure</option>
						<option value="MERG">Loan Merging</option>
						<option value="DCNH">Pay Date Change</option>
						<option value="MORAT">Moratorium</option>
						<option value="TAKEOVER">Take Over</option>
						<option value="TOPUP">Top Ups</option>
					</select>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3">Review Date</div>
		<div class="col-md-3">
			<div class="col-lg-12">
				<div class="input-group date form_date col-lg-12"
					data-date-format="dd MM yyyy" data-link-field="reviewdate"
					data-link-format="dd-mm-yyyy" >
					<input class="form-control" type="text" ng-model="dataIn.reviewdate" id="reviewdate"> <span class="input-group-addon" style="display:block" id="divspan">
					<span class="glyphicon glyphicon-calendar"></span></span>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="form-group col-lg-12">
			<label>&nbsp;Collector Note</label>
			<textarea class="form-control" rows="5" ng-trim="false"
				maxlength="2000" ng-model="dataIn.notemade" required></textarea>
			<span>{{2000 - dataIn.notemade.length}} characters left</span>
		</div>
	</div>
	<div class="row">
		<span class="pull-left">
			<button type="submit" class="btn btn-primary" ladda="Loading" data-style="expand-right"> Submit</button>
		</span>
	</div>
</form>
<hr>
<div class="row">
	<span id="a_generate"><i class="{{iconGenerate}}"></i></span><a href="" ng-show=true ng-click="generate(dataIn.demand)" id="a_generate2"> Generate: {{dataIn.demand}}</a>
	<form action="./DownloadFileServlet" id="myform">
		<input type="text" name="reportname" id="reportname" ng-model="letterSpolled" style="display: none">
	</form>
	<span id="a_download2"><i class="fa fa-download fa-1x"></i></span><a target="_self" href="#" onclick="document.getElementById('myform').submit()" id="a_download"> Download Letter</a>
</div>

<!-- GLOBAL SCRIPTS -->
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- END GLOBAL SCRIPTS -->

<script type="text/javascript" src="views/bootstrap-datepicker/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<!-- DATA TABES SCRIPT -->
<script src="bootstrap/js/bootstrap-table.js"></script>

<script type="text/javascript">
	$('.form_date').datetimepicker({
		format : 'dd-mm-yyyy',
		startDate : '-0d',
		language : 'en',
		weekStart : 1,
		todayBtn : 1,
		autoclose : 1,
		todayHighlight : 1,
		startView : 2,
		minView : 2,
		daysOfWeekDisabled : [ 0, 6 ],
		forceParse : 0
	});
	$('.form_date2').datetimepicker({
		format : 'dd-mm-yyyy',
		language : 'en',
		weekStart : 1,
		todayBtn : 1,
		autoclose : 1,
		startView : 2,
		minView : 2,
		forceParse : 0
	});
</script>

<script type="text/javascript">
	$(document).ready(function() {

		var globalUrl = 'http://localhost:8080/ecollect_3';

		var cust = document.getElementById("cust").value;
		var acc = document.getElementById("acc").value;
		var dept = localStorage.getItem("division");
		var user = document.getElementById("username").value;//localStorage.getItem("username");
		
		console.log('action page '+user);

		//document.getElementById("uploadcust").value=cust;
		//document.getElementById("uploadacc").value=acc;

		if (dept !== "CMD") {
			document.getElementById("cmdstatus").disabled = true;
			document.getElementById("brstatus").disabled = true;
			//document.getElementById("smsMessage").disabled = true;
		} else {
			document.getElementById("cmdstatus").disabled = false;
			document.getElementById("brstatus").disabled = false;
			//document.getElementById("smsMessage").disabled = false;
		}
		
	})
</script>