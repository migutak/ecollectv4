var app = angular.module("RDash", [ "ui.bootstrap", "ui.router","ngCookies", "mainService","angular-loading-bar",'ngIdle',"ngMaterial","angular-ladda","ui.grid",'ui.grid.selection', 'ui.grid.exporter',
                                    'ui.grid.moveColumns','ui.grid.resizeColumns','angularFileUpload','ui.grid.saveState']);
"use strict";
app.config(
		[ "$stateProvider", "$urlRouterProvider", function(t, e) {
			e.otherwise("/"), 
			t.state("index", {
				url : "/",
				templateUrl : "./views/templates/dashboard.html",
				controller : "dashCtrl"
			}).state("dashboard", {
				url : "/dashboard",
				templateUrl : "./views/templates/dashboard.html",
				controller : "dashCtrl"
			}).state("regionaldashboard", {
				url : "/regionaldashboard",
				templateUrl : "./views/templates/regdashboard.html"
			}).state("divdashboard", {
				url : "/divdashboard",
				templateUrl : "./views/templates/divdashboard.html"
			}).state("diary", {
				url : "/diary",
				templateUrl : "./views/templates/diary.html"
			}).state("viewall",{
				url : "/viewall/:from",
				templateUrl : "./views/templates/viewall2.html",
				controller : "viewall2Ctrl"
			}).state("viewallbranch",{
				url : "/viewallbranch",
				templateUrl : "./views/templates/viewallbranch.html",
				controller : "viewallCtrlbranch"
			}).state("viewportfolio",{
				url : "/viewportfolio",
				templateUrl : "./views/templates/viewallportfolio.html",
				controller : "viewallportCtrl"
			}).state("myallocations",{
				url : "/myallocations",
				templateUrl : "./views/templates/myallocations.html"
			}).state("myallocationsportfolio",{
				url : "/myallocationsportfolio",
				templateUrl : "./views/templates/myallocations.html",
				controller : "allocationsCtrlport"
			}).state("myallocatcards",{
				url : "/myallocatcards",
				templateUrl : "./views/templates/myallocations_cards.html",
				controller : "allocatcardsCtrl" 
			}).state("myworklist",{
				url : "/myworklist",
				templateUrl : "./views/templates/worklist.html"
			}).state("myworklistbranch",{
				url : "/myworklistbranch",
				templateUrl : "./views/templates/worklistbranch.html",
				controller : "worklistCtrlbranch"
			}).state("myworklistportfolio",{
				url : "/myworklistportfolio",
				templateUrl : "./views/templates/worklist.html",
				controller : "worklistCtrlport"
			}).state("worklistcc",{
				url : "/worklistcc",
				templateUrl : "./views/templates/worklistcc.html",
				controller : "worklistccCtrl"
			}).state("closed",{
				url : "/closed",
				templateUrl : "./views/templates/closed.html",
				controller : "closedCtrl"
			}).state("activitycc",{
				url : "/activitycc/:cardnumber",
				templateUrl : "./views/templates/activitycc.html",
				controller : "activity_cc_Ctrl"
			}).state("act",{
				url : "/act/:accnumber",
				templateUrl : "./views/templates/activity.html",
				controller : "activity_Ctrl"
			}).state("teamreview",{
				url : "/teamreview",
				templateUrl : "./views/templates/teamreviewer.html",
				controller : "teamreviewCtrl"
			}).state("teamreviewcc",{
				url : "/teamreviewcc",
				templateUrl : "./views/templates/teamreviewer_cc.html",
				controller : "teamreviewccCtrl"
			}).state("users",{
				url : "/users",
				templateUrl : "./views/templates/users.html",
				controller : "usersCtrl"
			}).state("funds",{
				url : "/funds",
				templateUrl : "./views/templates/funds.html"
				//controller : "fundsCtrl"
			}).state("new",{
				url : "/new",
				templateUrl : "./views/templates/new2.html",
				controller : "newCtrl"
			}).state("broken",{
				url : "/broken",
				templateUrl : "./views/templates/broken.html"
			}).state("letters",{
				url : "/letters",
				templateUrl : "./views/templates/letters.html",
				controller : "duelettersCtrl"
			}).state("branches",{
				url : "/branches",
				templateUrl : "./views/templates/branches.html",
				controller : "branchesCtrl"
			}).state("woffs",{
				url : "/woffs",
				templateUrl : "./views/templates/woff.html",
				controller : "woffCtrl"
			}).state("portfolio",{
				url : "/portfolio",
				templateUrl : "./views/templates/portfolio.html",
				controller : "portfolioCtrl"
			}).state("regions",{
				url : "/regions",
				templateUrl : "./views/templates/regions.html",
				controller : "RegionCtrl"
			}).state("demands",{
				url : "/demands",
				templateUrl : "./views/templates/demands.html",
				controller : "demandsCtrl"
			}).state("branch",{
				url : "/branch",
				templateUrl : "./views/templates/branch.html",
				controller : "branchRegionCtrl"
			}).state("managers",{
				url : "/managers",
				templateUrl : "./views/templates/managers.html",
				controller : "managersCtrl"
			}).state("editmanager",{
				url : "/editmanager/:branchid",
				templateUrl : "./views/templates/editmanager.html",
				controller : "editmanagerCtrl"
			}).state("editbranch",{
				url : "/editbranch/:branchid",
				templateUrl : "./views/templates/editbranch.html",
				controller : "editmanagerCtrl"
			}).state("confirmletter",{
				url : "/confirmletter/:letterid",
				templateUrl : "./views/templates/confirmletter.html",
				controller : "confirmletterCtrl"
			}).state("memo",{
				url : "/memo",
				templateUrl : "./views/templates/memo.html",
				controller : "memoCtrl"
			}).state("allocate",{
				url : "/allocate",
				templateUrl : "./views/templates/allocate.html",
				controller : "allocateCtrl"
			}).state("aro",{
				url : "/aro",
				templateUrl : "./views/templates/aro.html",
				controller : "aroCtrl"
			}).state("newaro",{
				url : "/newaro",
				templateUrl : "./views/templates/newaro.html",
				controller : "aroCtrl"
			}).state("updatearo",{
				url : "/updatearo/:arocode",
				templateUrl : "./views/templates/updatearo.html",
				controller : "aroupdateCtrl"
			}).state("searchbyarocode",{
				url : "/searchbyarocode/:arocode",
				templateUrl : "./views/templates/searchbyarocode.html",
				controller : "searchbyarocodeCtrl"
			}).state("searchbyname",{
				url : "/searchbyname/:name",
				templateUrl : "./views/templates/searchbyname.html",
				controller : "searchbynameCtrl"
			}).state("searchbycustnumber",{
				url : "/searchbycustnumber/:custnumber",
				templateUrl : "./views/templates/searchbycustnumber.html",
				controller : "searchbycustnumberCtrl"
			}).state("deletearo",{
				url : "/deletearo/:arocode",
				templateUrl : "./views/templates/deletearo.html",
				controller : "arodeleteCtrl"
			}).state("cards",{
				url : "/cards",
				templateUrl : "./views/templates/cards.html",
				controller : "cardsCtrl"
			}).state("buckets",{
				url : "/buckets",
				templateUrl : "./views/templates/buckets.html",
				controller : "bucketsCtrl"
			}).state("todayswork",{
				url : "/todayswork",
				templateUrl : "./views/templates/todayswork.html"
			}).state("action",{
				url : "/action/:id",
				templateUrl : "./views/templates/action.html",
				controller : "ActivityCtrl"
			}).state("action.accountinfo",{
				url : "/action.accountinfo",
				templateUrl : "./views/templates/accountinfo.html"
			}).state("action.action",{
				url : "/action.action/:accnumber",
				templateUrl : "action2.html",
				controller : "actionCtrl"
			}).state('action.customerinfo', {
				url : "/action.customerinfo",
				templateUrl : "./views/templates/customerinfo3.html",
				controller : "customerinfoCtrl"
			}).state('searchid', {
				url : "/searchid",
				templateUrl : "./views/templates/searchid.html",
				controller : "searchidCtrl"
			}).state('action.sameidnumbers', {
				url : "/action.sameidnumbers",
				templateUrl : "views/templates/sameidnumbers2.html",
				controller : 'sameidnumbersCtrl'
			}).state('action.notes', {
				url : "/action.notes",
				templateUrl : "views/templates/notes.html"
			}).state('action.contacts', {
				url : "/action.contacts",
				templateUrl : "views/templates/contactss.html",
				controller : "contactssCtrl"
			}).state('action.ptps', {
				url : "/action.ptps",
				templateUrl : "views/templates/ptps.html",
				controller : 'promisesCtrl'
			}).state('action.otheraccs', {
				url : "/action.otheraccs",
				templateUrl : "views/templates/otheraccs.html",
				controller : 'otheraccCtrl'
			}).state('action.directors', {
				url : "/action.directors",
				templateUrl : "views/templates/directors2.html",
				controller : 'directorsCtrl'
			}).state('action.files', {
				url : "/action.files",
				templateUrl : "views/templates/files2.html",
				controller : 'filesCtrl'
			}).state('action.email', {
				url : "/action.email",
				templateUrl : "views/templates/email2.html",
				controller : 'emailCtrl'
			}).state('action.collateral', {
				url : "/action.collateral",
				templateUrl : "views/templates/collateral.html",
				controller : 'collateralCtrl'
			}).state('action.addcontacts', {
				url : "/action.addcontacts",
				templateUrl : "views/templates/addcontact.html",
				controller : 'addcontactCtrl'
			})
			.state('action.editcontacts', {
				url : "/action.editcontacts/:id",
				templateUrl : "views/templates/editcontacts.html",
				controller : 'editcontactsCtrl'
			})
			
			;
		} ]);
function rdLoading() {
	var d = {
		restrict : "AE",
		template : '<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'
	};
	return d;
}

//for user timeout
app.config(function(IdleProvider, KeepaliveProvider) {
    KeepaliveProvider.interval(1);
    IdleProvider.timeout(60*5);
    IdleProvider.idle(60*45);
  })
  .run(function($rootScope, Idle, $log, Keepalive){
    Idle.watch();
   // $log.debug('app started.');
    $rootScope.$on('$locationChangeStart',function(){
    	var loggeduser = localStorage.getItem("uname");
        if(loggeduser=="" || loggeduser == undefined){
        	window.open("login.html","_self");
        }
    })
  });
//end user timeout
app.directive("rdLoading", rdLoading);
function rdWidgetBody() {
	var d = {
		requires : "^rdWidget",
		scope : {
			loading : "@?",
			classes : "@?"
		},
		transclude : !0,
		template : '<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',
		restrict : "E"
	};
	return d;
}
app.directive("rdWidgetBody", rdWidgetBody);
function rdWidgetFooter() {
	var e = {
		requires : "^rdWidget",
		transclude : !0,
		template : '<div class="widget-footer" ng-transclude></div>',
		restrict : "E"
	};
	return e;
}
app.directive("rdWidgetFooter", rdWidgetFooter);
function rdWidgetTitle() {
	var e = {
		requires : "^rdWidget",
		scope : {
			title : "@",
			icon : "@"
		},
		transclude : !0,
		template : '<div class="widget-header"><i class="fa" ng-class="icon"></i> {{title}} <div class="pull-right" ng-transclude></div></div>',
		restrict : "E"
	};
	return e;
}
app.directive("rdWidgetHeader", rdWidgetTitle);
function rdWidget() {
	var d = {
		transclude : !0,
		template : '<div class="widget" ng-transclude></div>',
		restrict : "EA"
	};
	return d;
}
app.directive("rdWidget", rdWidget);
function AlertsCtrl(e) {
			e.alerts = [
					{
						type : "success",
						msg : "Thanks for visiting! Feel free to create pull requests to improve the dashboard!"
					},
					{
						type : "danger",
						msg : "Found a bug? Create an issue with as many details as you can."
					} ], e.addAlert = function() {
				e.alerts.push({
					msg : "Another alert!"
				});
			}, e.closeAlert = function(t) {
				e.alerts.splice(t, 1);
			};
}
app.controller("AlertsCtrl", [ "$scope", AlertsCtrl ]);
function MasterCtrl(t, e) {
	var o = 992;
	t.getWidth = function() {
		return window.innerWidth;
	}, t.$watch(t.getWidth, function(g) {
		t.toggle = g >= o ? angular.isDefined(e.get("toggle")) ? e
				.get("toggle") ? !0 : !1 : !0 : !1;
	}), t.toggleSidebar = function() {
		t.toggle = !t.toggle, e.put("toggle", t.toggle);
	}, window.onresize = function() {
		t.$apply();
	};
}